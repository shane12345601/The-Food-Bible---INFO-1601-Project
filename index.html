<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe website</title>
    <style>
        .results{
            display: flex;
            margin-bottom: 10px;
            background-color: lightgray;
        }
        .results ul ul{
            list-style: none;
        }
    </style>
</head>
<body>
    
    <form>

        <input type="text" id="userInput" placeholder="Type here">

    </form>
    
    <button id="but1">Click to search</button>
    <hr>
    <div id="testData"></div>

    <script>

        document.getElementById('but1').addEventListener('click', getUserInput);


        function getUserInput(){
            var result = document.getElementById('userInput').value;
            
            var xhr = new XMLHttpRequest;
            
            xhr.open('GET', `https://api.edamam.com/search?q=${result}&app_id=e732e266&app_key=09c1cbb12dc2282cbcbacce78a46681f`, true);

            xhr.onload = function(){
                    if(this.status == 200){
                        console.log(this.responseText);
                        var data = JSON.parse(this.responseText);

                        var output = ``;
                        
                        for(var i in data.hits){
                            var guide = ``;
                            for(j in data.hits[i].recipe.ingredients){
                                guide += "<br> " + '&#9656 ' + `${data.hits[i].recipe.ingredients[j].text}`;
                                    
                            }
                            output += 
                                `<div class="results">` + 
                                `<img src="${data.hits[i].recipe.image}" width="auto" height ="auto">` +
                                `<ul>` + 
                                `<li>` + 
                                `${data.hits[i].recipe.label}` +
                                `<details>` + 
                                `<summary>` + 'Show recipe' + `</summary>` +
                                `<ul>` + `<li>` + guide +`</li>` + `</ul>` +
                                `</details>` +
                                 `</li>` + 
                                 `</ul>` + 
                                 "<br>" +
                                `</div>`;
                        }

                        document.getElementById('testData').innerHTML = output;
                    }
                }

                xhr.send();
        }
        
    </script>
</body>
</html>

<!-- 
    http://rustytest-com.stackstaging.com/ 
-->
